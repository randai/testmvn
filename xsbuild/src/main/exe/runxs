if [ "$XS_HOME" = "" ]
then
        echo "XS_HOME must be set"
        exit 1
fi
PWD=`pwd`
cd $XS_HOME/xs-current/$1
#extract the CLASSPATH
XS_CLASSPATH=`java -classpath ../lib/xscommon-1.0.0.jar com.flx.xs.common.util.ReadManifest $1-1.0.0.jar Class-Path :`
XS_CLASSPATH=$1-1.0.0.jar:$PATCH:$CLASSPATH

#extract the main class
XS_MAIN=`java -classpath ../lib/xscommon-1.0.0.jar com.flx.xs.common.util.ReadManifest $1-1.0.0.jar Main-Class`

#create log folders if they don't currently exist
#if there is one argument then the log folder is in the current folder
if [ $# = 1 ]
then
        if [ ! -d log ]
        then
                mkdir log
        fi
fi
if [ $# = 2 ]
then
        if [ ! -d $2/log ]
        then
                mkdir $2/log
        fi
fi

#run ... allow for insertion of additional or overide jars
java -classpath $XS_CLASSPATH $XS_MAIN $2
cd $PWD